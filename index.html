<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Trash Sorting - Waste Recycling Game</title>
    
    <!-- A-Frame Core -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <!-- MindAR Image Tracking -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
    <!-- A-Frame Physics System -->
    <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
    <!-- UI Overlay -->
    <div id="ui-overlay">
        <div id="score-display">Score: 0</div>
        <div id="instructions">
            üì± Point camera at target sticker<br>
            üóëÔ∏è Select trash type from dropdown<br>
            üëÜ Click the correct bin!<br>
            üéØ Match trash to bin for points!
        </div>
    </div>
    
    <div id="throw-indicator" class="hidden">
        TAP to THROW! üéØ
    </div>
    
    <!-- Recenter Button -->
    <button id="recenter-btn" class="hidden" style="position: fixed; bottom: 20px; right: 20px; padding: 15px 25px; background: rgba(33, 150, 243, 0.9); color: white; border: none; border-radius: 50px; font-size: 16px; font-weight: bold; cursor: pointer; z-index: 1000; box-shadow: 0 4px 8px rgba(0,0,0,0.3);">
        üìç RECENTER
    </button>

    <!-- Trash Type Selector -->
    <div id="trash-selector">
        <label for="trash-dropdown" style="color: white; font-weight: bold; margin-right: 10px;">Select Trash:</label>
        <select id="trash-dropdown">
            <option value="">-- Choose Type --</option>
            <option value="organik">ü•¨ ORGANIC (Tissue, Food waste)</option>
            <option value="anorganik">ü•§ INORGANIC (Bottle, Can, Plastic)</option>
            <option value="hazardous">‚ö†Ô∏è HAZARDOUS (Battery, Chemical)</option>
        </select>
    </div>

    <!-- AR Scene -->
    <a-scene 
        mindar-image="imageTargetSrc: ./assets/targets.mind; autoStart: true; uiLoading: yes; uiScanning: yes; uiError: yes;"
        color-space="sRGB"
        renderer="colorManagement: true, physicallyCorrectLights"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false"
        physics="gravity: -9.8; debug: false;">
        
        <!-- Asset Management for 3D Models -->
        <a-assets>
            <!-- Bin Models -->
            <a-asset-item id="bin-organik" src="./assets/models/bin-organik.glb"></a-asset-item>
            <a-asset-item id="bin-anorganik" src="./assets/models/bin-anorganik.glb"></a-asset-item>
            <a-asset-item id="bin-hazardous" src="./assets/models/bin-kertas.glb"></a-asset-item>
        </a-assets>
        
        <a-camera position="0 0 0" look-controls="enabled: false" cursor="fuse: false; rayOrigin: mouse;" raycaster="objects: .clickable"></a-camera>
        <a-entity light="type: ambient; color: #BBB; intensity: 0.8;"></a-entity>
        <a-entity light="type: directional; color: #FFF; intensity: 0.6" position="-0.5 1 1"></a-entity>
        
        <!-- World-anchored container for persistent objects -->
        <a-entity id="world-anchor"></a-entity>
        
        <a-entity id="marker" mindar-image-target="targetIndex: 0" visible="false">
            <!-- Ground platform -->
            <a-box position="0 -0.3 0" width="2" height="0.1" depth="1.5" color="#333" opacity="0.3" static-body></a-box>
            
            <!-- Red Bin (Inorganic) with 3D Model -->
            <a-entity position="-0.6 0 0" class="bin-container">
                <a-gltf-model class="bin-model clickable" data-bin-type="anorganik" src="#bin-anorganik" position="0 -0.05 0" scale="0.5 0.5 0.5"></a-gltf-model>
                <a-text value="INORGANIC" color="white" align="center" width="0.8" position="0 0.3 0" rotation="0 0 0"></a-text>
                <a-cylinder class="goal-zone" data-bin-type="anorganik" position="0 0.15 0" radius="0.14" height="0.15" opacity="0" static-body></a-cylinder>
            </a-entity>
            
            <!-- Green Bin (Organic) with 3D Model -->
            <a-entity position="0 0 0" class="bin-container">
                <a-gltf-model class="bin-model clickable" data-bin-type="organik" src="#bin-organik" position="0 -0.05 0" scale="0.5 0.5 0.5"></a-gltf-model>
                <a-text value="ORGANIC" color="white" align="center" width="0.8" position="0 0.3 0" rotation="0 0 0"></a-text>
                <a-cylinder class="goal-zone" data-bin-type="organik" position="0 0.15 0" radius="0.14" height="0.15" opacity="0" static-body></a-cylinder>
            </a-entity>
            
            <!-- Blue Bin (Hazardous) with 3D Model -->
            <a-entity position="0.6 0 0" class="bin-container">
                <a-gltf-model class="bin-model clickable" data-bin-type="hazardous" src="#bin-hazardous" position="0 -0.05 0" scale="0.5 0.5 0.5"></a-gltf-model>
                <a-text value="HAZARDOUS" color="white" align="center" width="0.8" position="0 0.3 0" rotation="0 0 0"></a-text>
                <a-cylinder class="goal-zone" data-bin-type="hazardous" position="0 0.15 0" radius="0.14" height="0.15" opacity="0" static-body></a-cylinder>
            </a-entity>
        </a-entity>
    </a-scene>

    <!-- External JavaScript Files -->
    <script src="./js/world-anchor.js"></script>
    <script src="./js/game.js"></script>
</body>
</html>